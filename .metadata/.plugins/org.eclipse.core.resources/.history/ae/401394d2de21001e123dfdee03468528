package EjerciciosGuia;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.File;
import java.io.FileWriter;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.io.PrintWriter;




/*
 * charAT: devuelve lo que se encuentra en la posiciÃ³n que nosotros queramos
 * compareTO: compara dos cadenas de caracteres y devuelve 0 si no son iguales y 1 en caso contrario
 * compareToIgnoreCase: la Ãºnica diferencia es que no es estricto en cuanto a mayÃºsculas y minÃºsculas
 * equals: lo mismo que el compareTo solo que devuelve un booleano en cada caso
 * indexOf: devuelve el punto en el que se encuentra una cadena de caracteres o uno solo en especÃ­fico. Solo devuelve la primera apariciÃ³n
 * length: recorre toda la cadena de caracteres y devuelve la cantidad que hay
 * replace: cambia una cadena de caracteres o un solo caracter pero la primera vez que aparece
 * replaceAll: remplaza por cada vez que aparece la cadena de caracteres o el caracter
 * toLowerCase: devuelve toda la cadena en minusculas
 * toUpperCase: devuelve toda la cadena en mayusculas
 * substring: agarra de la cadena de caracteres a partir de un punto que nostros especiquemos hasta cierto otro punto
 * trim: devuelve la cadena ded caracteres pero sin espacios en blanco a la izquierda y derecha de este si es que lo tiene
 */





public class Ejercicio3 {
	
	static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
	static PrintStream ps = new PrintStream(System.out);

	
	
	// Crear un archivo de texto (en la carpeta del proyecto) que guarde solo el Ãºltimo dato que el usuario escribe por consola.
	public static void Ej3a() {
		String[] datos = funciones.ingresarDatosEnLista();
		
		File archivo = new File("hola.txt");
		FileWriter fw;
		
		try {
			fw = new FileWriter( archivo , false );
			PrintWriter pw = new PrintWriter(fw);
			if( datos.length > 0 ) {
				String ultimoDato = datos[ datos.length -1 ];
				pw.println(ultimoDato);
			} else {
				pw.println("No se han ingresado datos.");
			}
			
			fw.flush();
			pw.close();
			fw.close();
			
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
	
	
	
	// Crear un archivo de texto (en la carpeta del proyecto) que guarde TODOS los valores NUMERICOS que ingrese el
	// usuario por consola, cada uno en un renglÃ³n (puede ingresar otros datos que no sean numero OJO).
	public static void Ej3b() {
		String[] datos = funciones.ingresarDatosEnLista();
		
		File archivo = new File("datos.txt");
		FileWriter fw;
		
        List<Integer> numerosLista = funciones.filtrarNumeros(datos);

        try {
            fw = new FileWriter( archivo , false );
			PrintWriter pw = new PrintWriter(fw);
			
            for (int numero : numerosLista) {
                pw.println(numero);
            }

            fw.flush();
            pw.close();
            fw.close();
            
        } catch (IOException e) {
            e.printStackTrace();
        }
		
	}
	
	
	
	// Crear un archivo de texto (fuera de la carpeta del proyecto) que se llame “números.txt” que guarde los números
	// pares desde el 0 al 1000.
	public static void Ej3c() {
		List<Integer> numerosPares = new ArrayList<>();
		
		for( int i = 0 ; i <= 1000 ; i += 2) {
			numerosPares.add(i);
		}
		
		File archivo = new File("../Archivos/numeros.txt");
		
		FileWriter fw;
		PrintWriter pw;
		try {
			fw = new FileWriter( archivo , false );
			pw = new PrintWriter(fw);
			
			for( int num : numerosPares ) {
				pw.println(num);
			}
			
			fw.flush();
			pw.close();
			fw.close();
			
			ps.println("Archivo creado.");
		} catch (IOException e) {
			e.printStackTrace();
			ps.println("Error al crear el archivo: " + e.getMessage());
		}
	}
	
	
	
	// Utilizar el archivo creado anteriormente “números.txt” y leer los valores para mostrarlos por la consola.
	public static void Ej3d() {
		String cadena = funciones.leerArchivo("../Archivos/numeros.txt");
		
		ps.println(cadena);
	}
	
	
	
	// Utilizar el archivo creado anteriormente “números.txt” y borrarle todos los renglones que contengas números impares.
	public static void Ej3e() {
		String cadena = funciones.leerArchivo("../Archivos/numeros.txt");
		
		cadena = cadena.replaceAll("(?m)^.*[13579].*$", "");
		
		FileWriter fw;
		PrintWriter pw;
		
		try {
			fw = new FileWriter("../Archivos/numeros.txt");
			pw = new PrintWriter(fw);
			
			pw.println(cadena);
			
			fw.flush();
			pw.close();
			fw.close();
			
			ps.println("Archivo actualizado.");
		} catch (IOException e) {
			e.printStackTrace();
			ps.println("Error al actualizar el archivo: " + e.getMessage());
		}
	}
	
	
	
	// Utilizar el archivo creado anteriormente “números.txt” (con los números impares eliminados) y colocar en otro archivos 
    // de texto “primos.dat” (fuera de la carpeta del proyecto y de la carpeta que tiene el archivo “números.txt”) todos los
	// números de ”números.txt” que sean primos.
	public static void Ej3f() {
	    String cadena = funciones.leerArchivo("../Archivos/numeros.txt");
	    
	    List<Integer> numerosPrimos = new ArrayList<>();
	    
	    File archivo = new File("../ArchivosExtras/primos.dat");
	    
	    FileWriter fw;
	    PrintWriter pw;
	    
	    try {
	        fw = new FileWriter(archivo);
	        pw = new PrintWriter(fw);
	        
	        String[] numeros = cadena.split("\n");
	        
	        for( String num : numeros ) {
	        	try {
	                int numero = Integer.parseInt(num);
	                if( funciones.esPrimo(numero) ) {
	                    numerosPrimos.add(numero);
	                }
	            } catch (NumberFormatException e) {
	                // Ignorar líneas que no se pueden convertir a enteros
	            }
	        }
	        
	        for (int primo : numerosPrimos) {
	            pw.println(primo);
	        }
	        
	        fw.flush();
	        pw.close();
	        fw.close();
	        br.close();
	        
	    } catch (IOException e) {
	        e.printStackTrace();
	    }
	}
	
	
	
	// Crear un archivo de texto plano (fuera de la carpeta del proyecto) que se llame “caracteres.dat”, cargarle 10 palabras
	// que contengan la letra ‘ñ’ mediante consola. Luego mostrar las 10 palabras por consola con la leyenda “Fichero original: ”
	// y luego editar el fichero para que cambie todas las apariciones de la letra ‘ñ’ por su fonético ‘nie-nio’ y mostrar de
	// nuevo las palabras con la leyenda “Fichero arreglado:”.
	public static void Ej3g() {
		
		List<String> palabras = new ArrayList<>();
		
		String rutaArchivo = "../Archivos/caracteres.dat";
		
		//File archivo = new File(rutaArchivo);
	    
	    FileWriter fw;
	    PrintWriter pw;
	    
	   
    	try {
    		for( int i = 0 ; i < 10 ; i++ ) {
    			ps.println("Ingrese una palabra con ñ: ");
    			palabras.add(br.readLine());
    		}
    		
    		fw = new FileWriter(rutaArchivo);
	        pw = new PrintWriter(fw);
	        
	        for( String palabra : palabras ) {
	        	pw.println(palabra);
	        }
	        
	        pw.close();
	        
	        ps.println("");
	        ps.println("Fichero original:");
	        ps.println("");
	        FileReader fr = new FileReader(rutaArchivo);
	        BufferedReader br = new BufferedReader(fr);
    		
	        String linea;
            while( (linea = br.readLine()) != null ) {
                System.out.println(linea);
            }
	        
            br.close();
            
            
            
            List<String> lineasEditadas = new ArrayList<>();

            BufferedReader brEd = new BufferedReader(new FileReader(rutaArchivo));
            while ( (linea = brEd.readLine()) != null ) {
            	String palabraEditada = funciones.reemplazarEquivalenteFonetico(linea);
                lineasEditadas.add(palabraEditada);
            }
            
            brEd.close();

            
            
            fw = new FileWriter(rutaArchivo);
            pw = new PrintWriter(fw);
            
            for( String lineaEditada : lineasEditadas ) {
                pw.println(lineaEditada);
            }
            
            pw.close();

            
	        ps.println("");
            ps.println("Fichero arreglado:");
            ps.println("");
            BufferedReader brEd2 = new BufferedReader(new FileReader(rutaArchivo));
            while( (linea = brEd2.readLine()) != null ) {
                ps.println(linea);
            }
            
            brEd2.close();
            
            
		} catch (IOException e) {
			e.printStackTrace();
		}
	    
	}
}